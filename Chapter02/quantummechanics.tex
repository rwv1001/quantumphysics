\section{The mathematical formalism of quantum mechanics}
Given\footnotetext{This is because when $\theta=90\degree$, $\sin(\theta/2)=\cos(\theta/2)=\frac{1}{\sqrt{2}}$, so  $\ket*{\uvbp{b}}= \frac{1}{\sqrt{2}}(\ket*{\uvbp{a}}+\ket*{\uvbm{a}})$ in equation (\ref{spintrans1}) with $\theta=90\degree$. } a possible kind of measurement (e.g. measuring the spin of a particle along a particular axis), there will be a mathematical object called an \textbf{observable} which encodes all the possible measurement outcomes for this particular kind of measurement. The precise mathematical definition of an observable is as follows: an observable of a physical system is a Hermitian operator that acts on the Hilbert space of states describing the physical system. In order to understand what this definition means, there are a number of things we need to explain: what a Hilbert space is, what a Hermitian operator is, and how a Hermitian operator relates to a particular kind of measurement. In order to explain all this, it will be helpful to keep in mind the simple example of the measurement device $O_{\uvbp{a}}$ described on page \pageref{Lambdaa} which returns 1 if a particle is in the spin $\ket{\uvbp{a}}$-state and 0 if the particle is in the spin $\ket{\uvbm{a}}$-state. This measurement will have a corresponding observable which we will denote by $\hat{O}_{\uvbp{a}}$. 

Now we have seen that states $\ket*{\uvbp{a}}$ and $\ket*{\uvbm{a}}$ representing the spin of  a particle can be added to give the spin state $\ket*{\uvbp{b}}$ and $\ket*{\uvbm{b}}$ as seen in equation (\ref{spintrans}). We have also seen that if we have two states $\ket{\psi}$ and $\ket{\chi}$, we can define their bra-ket $\ip*{\chi}{\psi}$ to be a complex number satisfying the Born Rule so that $\abs{\ip*{\chi}{\psi}}^2$ is the probability $P(\chi|\psi)$ that the particle will be found to be in state $\ket*{\chi}$ given that we know that the particle is in state $\ket*{\psi}$. We thus imposed the assumption that  $\ip*{\psi}{\psi}=1$ for any state $\ket*{\psi}$. 

Now in order to arrive at a definition of a Hilbert space, we first need to relax this normalization condition $\ip*{\psi}{\psi}=1$. Thus, if $\ket{\psi}$  is a state and $\lambda\in\mathbb{C}$ is any non-zero complex number, then we allow $\ket{\psi'}=\lambda\ket{\psi}$ also to be a state with the caveat that $\ket{\psi'}$ represents exactly the same physical state as $\ket{\psi}$, and that $\ip*{\psi'}{\psi'}=|\lambda|^2\ip*{\psi}{\psi}.$ We define $\norm{\psi}=\sqrt{\ip*{\psi}{\psi}}$ and we say that $\ket{\psi}$ has been \textbf{normalized} when $\norm{\psi}=1$. Now when calculating probabilities, we need to remember to include a normalization factor. Thus, the probability that the particle will be found to be in state $\ket*{\chi}$ given that we know that the particle is in state $\ket*{\psi}$ will now be $P(\chi|\psi) = \frac{|\ip*{\chi}{\psi}|^2}{\norm{\psi}\norm{\chi}}.$\footnote{ If there is no such normalization factor because $\norm{\psi}=0,$ then $\ket*{\psi}$ does not represent a physical state, so the probability the system is ever in this state will be zero, and so in this case we will set $P(\chi|\psi)=0.$} It is  dropping the assumption $\norm{\psi}=1$ on the states of a physical system that gives rise to the mathematical structure known as a Hilbert Space.   

A \textbf{Hilbert space} is a set $H$ in which 
\begin{enumerate}[noitemsep, nosep, topsep=0pt]
\item any two members of $H$ can be added to obtain another member of $H$, 
\item any member of $H$ can be multiplied by any complex number to obtain another member of $H$,
\item one can take the bra-ket of any two members of $H$ to obtain a complex number\end{enumerate}
subject to some natural axioms.\footnotemark

A very simple example of a Hilbert space would be the set of states 
$$\{\alpha\ket*{\uvbp{a}}+\beta\ket*{\uvbm{a}}:\alpha,\beta\in\mathbb{C}\}.$$ 
As we will soon see, the observable corresponding to the measurement device $O_{\uvbp{a}}$ will be the operator $\hat{O}_{\uvbp{a}}$ that sends the state $\alpha\ket*{\uvbp{a}}+\beta\ket*{\uvbm{a}}$ to the state $\alpha\ket*{\uvbp{a}}.$

More generally, suppose we have an experimental setup (for example the Stern-Gerlach experiment) where a physical system can be in one of several measurable states $\ket{\psi_1},\ldots,\ket{\psi_N}\in H$. The physical system could also be in a state described by a sum of some of the $\ket{\psi_1},\ldots,\ket{\psi_N}$, \footnotetext{More formally, a complex Hilbert space $H$ is a complex vector space possessing a bra-ket. By a \textbf{complex vector space}, we mean a set $V$ such that the following axioms are satisfied 
\begin{itemize}[topsep=0pt]
\item $\psi+(\chi+\zeta)=(\psi+\chi)+\zeta,\,\forall \lambda, \chi,\zeta\in V$
\item $\psi+\chi=\chi+\psi,\,\forall \psi,\chi\in V$
\item there exists an element $\bm{0}\in V$ such that $\psi+\bm{0}=\psi,\,\forall\psi\in V$.
\item $\forall \psi\in V$ there exists an element $-\psi\in V$ such that $\psi+(-\psi)=\bm{0}$.
\item $\forall \lambda,\mu\in\mathbb{C}$ (i.e. in the set of complex numbers -- this is why it is called a \emph{complex} vector space), and $\psi\in V,\,\lambda(\mu\psi)=(\lambda\mu)\psi$.
\item for the scalar $1\in\mathbb{C},\, 1\psi=\psi,\,\forall\psi\in V$
\item $\lambda(\psi+\chi)=\lambda\psi+\lambda\chi,\forall\psi,\chi\in V$ and $\lambda\in\mathbb{C}$
\item $(\lambda+\mu)\psi=\lambda\psi+\mu\psi,\,\forall \lambda,\mu\in \mathbb{C}$ and $\psi\in V.$
\end{itemize}
A \textbf{Hilbert space} $H$ is a complex vector space possessing a bra-ket. Strictly speaking, a Hilbert space also has a property called completeness, but this property need not concern us here. In quantum theory, elements of $H$ are expressed in terms of kets, $\ket{\cdot}$. Kets behave like vectors, so for $\ket{\psi},\ket{\chi}\in H$ and $\lambda,\mu\in\mathbb{C}$, we have $\lambda\ket{\psi}+\mu\ket{\chi}=\ket{\lambda\psi+\mu\chi}$. The bra-ket of $\ket{\psi}$ and $\ket{\chi}$ is then written as $\ip{\psi}{\chi}$, and it satisfies the following axioms:
\begin{itemize}[topsep=0pt]
\item $\ip{\psi}{\chi}\in\mathbb{C},\,\forall\psi,\chi\in H$.
\item $\ip{\psi}{\chi}=\overline{\ip{\chi}{\psi}},\,\forall\psi,\chi\in H$.
\item $\ip{\psi}{\psi}\geq 0,\, \forall \ket{\psi}\in H$ and $\ip{\psi}{\psi}=0$ if and only if $\ket{\psi}=\bm{0}$.
\item $\ip{\zeta}{\lambda\psi+\mu\chi}=\lambda\ip{\zeta}{\psi}+\mu\ip{\zeta}{\chi},\,\forall \ket{\psi},\ket{\chi},\ket{\zeta}\in H$ and  $\lambda,\mu\in\mathbb{C}$.
\end{itemize}} but by saying the system is in one of these $\ket{\psi_1},\ldots,\ket{\psi_N}$ measurable states, we mean that there is a measuring device that will always give the same measurement outcome whenever the system is in the same measurable state.\footnote{When the state is described as a non-trivial sum of the measurable states, we no longer have such certainty, and instead we can only speak of probabilities based on the coefficients on the measurable states.} We also assume \textbf{orthonormality}, that is we assume $\ip{\psi_i}{\psi_i}=1$ and $\ip{\psi_i}{\psi_j}=0$ for $i\neq j$ so that if the system is measured to be in the $\ket{\psi_j}$-state, then there would be zero probability that it could then be measured to be in the $\ket{\psi_i}$-state for $i\neq j$.  

Now suppose that for each measurable state $\ket{\psi_i}$, we assign a real number $o_i$.  There might be a very natural way of doing this, such as assigning  $o_i$ to be the angle by which a pointer of a measurement device is deflected when the system is in the state $\ket{\psi_i}$, but the assignment could be as ad hoc as we wished â€“ we can just think of it as the measurement value an experimenter records when he or she observes a particular measurement outcome. Given such an assignment of measurement values, the corresponding observable $\hat{O}$ would be a mapping of states to states satisfying the following rules:
\begin{enumerate}[noitemsep, nosep, topsep=0pt]
\item $\hat{O}\ket{\psi_i}=o_i\ket{\psi_i}$
\item $\hat{O}(\lambda\ket{\psi}+\mu\ket{\chi})=\lambda\hat{O}\ket{\psi}+\mu\hat{O}\ket{\chi}$  for all states $\ket{\psi},\ket{\chi}\in H$ and complex numbers $\lambda,\mu\in\mathbb{C}$.
\end{enumerate}
When a mapping $\hat{O}$ satisfies rule 2., we refer to $\hat{O}$ as an \textbf{operator} on $H$. Since the measurement device $O_{\uvbp{a}}$ outputs a value of $1$ when the particle is in the $\ket*{\uvbp{a}}$-state and $0$ when the particle is in the $\ket*{\uvbm{a}}$-state, it is now clear from rule 1 and 2 why the corresponding observable $\hat{O}_{\uvbp{a}}$ will be the operator that sends the state $\alpha\ket*{\uvbp{a}}+\beta\ket*{\uvbm{a}}$ to $\alpha\ket*{\uvbp{a}}$.

For a given physical state $\ket{\psi}\in H$, we define the expected measurement value of $\hat{O}$
\begin{equation}\label{expectation2}
\ev*{\hat{O}}_\psi\myeq\sum_{i=1}^N p_io_i,
\end{equation}
just as in the formula (\ref{expectation}). Clearly, this expectation value will depend on the state the system is in, hence the subscript $\psi$. For instance, if the system is in the $\ket{\psi_i}$-state, then the expectation value of the measurement will be $o_i$ since the probability that the state is in the state $\ket{\psi_i}$ will be 1, so that $p_i=1$ and $p_j=0$ for all $j\neq i$. But if the system was in an arbitrary state $\ket{\psi}=\sum_{i=1}^N \alpha_i\ket{\psi_i}$ with $\norm{\psi}=1$, then it turns out that 
\begin{equation}\refstepcounter{equation}\label{evev}\ev*{\hat{O}}_\psi=\ev*{\hat{O}}{\psi}.\tag{\theequation}\protect\footnotemark
\end{equation}\footnotetext{\label{footnote_1}To see this, note that $\alpha_i=\ip{\psi_i}{\psi}$ from which it follows that  if we define the mapping $I=\sum_{i=1}^N\dyad{\psi_i}$ then $I\ket{\psi}=\sum_{i=1}^N\ket{\psi_i}\ip{\psi_i}{\psi}=\sum_{i=1}^N\ip{\psi_i}{\psi}\ket{\psi_i}=\ket{\psi}$. Therefore,
\begin{align*}\ev*{\hat{O}}{\psi}&= \ev*{\hat{O} I}{\psi}=\sum_{i=1}^N \mel{\psi}{\hat{O}}{\psi_i}\ip{\psi_i}{\psi}=\sum_{i=1}^No_i\ip{\psi}{\psi_i}\ip{\psi_i}{\psi}\\&=\sum_{i=1}^No_i\abs{\ip{\psi_i}{\psi}}^2=\sum_{i=1}^No_ip_i=\ev*{\hat{O}}_\psi.\end{align*}}We can see that this formula is correct in the simple example when the system is in the $\ket{\psi_i}$-state, for in this case, the expectation value should be $o_i$, and we clearly have $\ev*{\hat{O}}{\psi_i}=o_i$ since $\hat{O}\ket{\psi_i}=o_i\ket{\psi_i}$ and $\ip*{\psi_i}=1$. Hence, $\ev*{\hat{O}}_{\psi_i}=\ev*{\hat{O}}{\psi_i}$ as expected.

To say that $\hat{O}$ is \textbf{Hermitian} is to say that $\ev*{\hat{O}}{\psi}$ is a real number for any arbitrary state $\ket*{\psi}$. Thus, the observable $\hat{O}$ defined by the two criteria above is a Hermitian operator acting on the Hilbert space of states $H$. Roughly speaking, we can assume\footnote{Strictly speaking, we require a Hermitian operator to have a property known as compactness for this assumption to hold.}  that given a Hermitian operator $\hat{O}$ on a Hilbert space of states $H$, any state $\ket{\psi}\in H$ can be expressed as a (possibly infinite) sum 
\begin{equation}\label{span}
\ket{\psi}=\sum_{i=1}^N\alpha_i\ket{\psi_i}
\end{equation}
where $\hat{O}\ket{\psi_i}=o_i\ket{\psi_i}$ for some set of states $\ket{\psi_i}$ referred to as \textbf{eigenstates} of $\hat{O}$, and real numbers $o_i$ referred to as \textbf{eigenvalues} of $\hat{O}$ . We will typically assume that the $\ket{\psi_i}$ are orthonormal. Orthonormality of the $\ket{\psi_i}$ will entail that the coefficients $\alpha_i$ will be uniquely determined by the formula $\alpha_i=\ip{\psi_i}{\psi}$. Thus, this set of eigenstates $\{\ket{\psi_1},\ldots\ket{\psi_N}\}$ satisfies the criterion for being a \textbf{basis} of the Hilbert space of states $H$, namely, every state $\ket{\psi}\in H$ can be uniquely expressed by a summation of the form given in equation (\ref{span}).\footnote{Note that although for a given basis, equation (\ref{span}) will be unique, there will be many different bases, and the $\alpha_i$ coefficients will depend on which basis is chosen.} We refer to an expression of the form (\ref{span}) as a \textbf{linear combination} of the basis $\{\ket{\psi_1},\ldots\ket{\psi_N}\}$. 
